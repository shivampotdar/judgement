<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#166534">
  <meta name="description" content="Track your Judgement/Kachuful card game scores with this elegant PWA">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Judgement">
  
  <title>Judgement Score Tracker</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/icon.svg">
  <link rel="apple-touch-icon" href="/icon-192.png">
  
  <!-- Preconnect to Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    #root {
      min-height: 100vh;
      min-height: 100dvh;
    }
    
    /* Loading screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #166534 0%, #15803d 50%, #166534 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(251, 191, 36, 0.3);
      border-top-color: #fbbf24;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      margin-top: 20px;
      color: #fbbf24;
      font-family: system-ui, -apple-system, sans-serif;
      font-size: 18px;
      font-weight: 600;
    }

    /* Game Styles */
    @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@600;700&family=Fredoka:wght@400;500;600&family=Poppins:wght@400;600;700&display=swap');
          
    body {
      font-family: 'Poppins', sans-serif;
    }
    
    .felt-texture {
      background-image: 
        repeating-linear-gradient(
          90deg,
          rgba(0, 0, 0, 0.03) 0px,
          rgba(0, 0, 0, 0.03) 1px,
          transparent 1px,
          transparent 2px
        ),
        repeating-linear-gradient(
          0deg,
          rgba(0, 0, 0, 0.03) 0px,
          rgba(0, 0, 0, 0.03) 1px,
          transparent 1px,
          transparent 2px
        );
    }
    
    .card-shadow {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 
                  0 2px 4px -1px rgba(0, 0, 0, 0.2),
                  inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
    }
    
    .gold-glow {
      box-shadow: 0 0 20px rgba(251, 191, 36, 0.3),
                  0 0 40px rgba(251, 191, 36, 0.2);
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loading">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading Judgement...</div>
  </div>
  
  <!-- React Root -->
  <div id="root"></div>
  
  <!-- React and ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script>window.react = React;</script>
  
  <!-- Babel Standalone for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Lucide Icons - Use Lucide React -->
  <script src="https://unpkg.com/lucide-react"></script>
  <script>
    // Wait for LucideReact to be available
    if (typeof LucideReact === 'undefined') {
      console.error('LucideReact failed to load');
    }
  </script>
  
  <!-- App Component -->
  <script type="text/babel" src="judgement-game.jsx"></script>
  
  <!-- Initialize -->
  <script type="text/babel">
    const { StrictMode } = React;
    const { createRoot } = ReactDOM;
    
    // Wait for component to be available and render
    function initApp() {
      if (typeof window.JudgementGame === 'undefined') {
        console.log('Waiting for JudgementGame component...');
        setTimeout(initApp, 100);
        return;
      }
      
      // Get component from window
      const JudgementGame = window.JudgementGame;
      
      // Hide loading screen and render app
      const root = createRoot(document.getElementById('root'));
      root.render(
        <StrictMode>
          <JudgementGame />
        </StrictMode>
      );
      
      // Remove loading screen after a brief delay
      setTimeout(() => {
        const loading = document.getElementById('loading');
        if (loading) {
          loading.style.opacity = '0';
          loading.style.transition = 'opacity 0.3s ease';
          setTimeout(() => loading.remove(), 300);
        }
      }, 500);
    }
    
    // Start initialization
    initApp();
  </script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => console.log('SW registered:', registration))
          .catch(err => console.log('SW registration failed:', err));
      });
    }
  </script>
</body>
</html>
